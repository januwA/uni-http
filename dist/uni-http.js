!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.uniHttp=r():e.uniHttp=r()}(this,(function(){return(()=>{"use strict";var e={503:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UniAbortController=void 0;r.UniAbortController=class{constructor(){this.promise=new Promise((e=>this._res=e))}abort(){this._res()}}},607:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.KH5CrossInterceptor=r.UniHttpInterceptors=r.urlWithParams=r.removeHeaderContentType=r.parseUrlParams=r.mergeUrl=r.mergeConfig=r.jsonToSerialize=r.UniHttp=r.UniAbortController=void 0;var o=t(503);Object.defineProperty(r,"UniAbortController",{enumerable:!0,get:function(){return o.UniAbortController}});var n=t(635);Object.defineProperty(r,"UniHttp",{enumerable:!0,get:function(){return n.UniHttp}});var s=t(593);Object.defineProperty(r,"jsonToSerialize",{enumerable:!0,get:function(){return s.jsonToSerialize}}),Object.defineProperty(r,"mergeConfig",{enumerable:!0,get:function(){return s.mergeConfig}}),Object.defineProperty(r,"mergeUrl",{enumerable:!0,get:function(){return s.mergeUrl}}),Object.defineProperty(r,"parseUrlParams",{enumerable:!0,get:function(){return s.parseUrlParams}}),Object.defineProperty(r,"removeHeaderContentType",{enumerable:!0,get:function(){return s.removeHeaderContentType}}),Object.defineProperty(r,"urlWithParams",{enumerable:!0,get:function(){return s.urlWithParams}});var i=t(911);Object.defineProperty(r,"UniHttpInterceptors",{enumerable:!0,get:function(){return i.UniHttpInterceptors}}),Object.defineProperty(r,"KH5CrossInterceptor",{enumerable:!0,get:function(){return i.KH5CrossInterceptor}})},911:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.KH5CrossInterceptor=r.UniHttpInterceptors=void 0;class t{}r.UniHttpInterceptors=t;r.KH5CrossInterceptor=class extends t{request(e){
// #ifdef H5

 if (process.env.NODE_ENV === "development") {
   options.baseURL = "";
 }
// #endif
return e}success(e){return e}fail(e){return e}complete(e){return e}}},635:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UniHttp=void 0;const o=t(593);r.UniHttp=class{constructor(e={}){this.config=e}request(e){return function(e){var r,t,n;let s,i;const a=new Promise(((e,r)=>{s=e,i=r}));let l=!1;const u={errMsg:"request:fail cancel"};if(Array.isArray(e.interceptors))for(const r of e.interceptors)if(!0===(e=r.request(e)).cancel){l=!0,r.fail(u),r.complete(u);break}if(l)return i(u),a;const c=o.urlWithParams(e),d=e.filePath||e.file||e.files&&e.files.length,p=r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.success(r)})),e.success?e.success(r):s(r)},f=r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.fail(r)})),e.fail?e.fail(r):i(r)},m=r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.complete(r)})),e.complete&&e.complete(r)};if(d){e.header=o.removeHeaderContentType(null!==(r=e.header)&&void 0!==r?r:{});const n=uni.uploadFile({url:c,fileType:e.fileType,file:e.file,files:e.files,filePath:e.filePath,name:e.name,header:e.header,formData:e.data,success:e=>{let r;try{r=JSON.parse(e.data)}catch(t){r=e.data}const t={statusCode:e.statusCode,header:{},cookies:[],data:r};p(t)},fail:f,complete:m});null===(t=e.abortController)||void 0===t||t.promise.then((()=>{n.abort()})),e.offHeadersReceived&&n.offHeadersReceived(e.offHeadersReceived),e.onHeadersReceived&&n.onHeadersReceived(e.onHeadersReceived),e.onProgressUpdate&&n.onProgressUpdate(e.onProgressUpdate),e.offProgressUpdate&&n.offProgressUpdate(e.offProgressUpdate)}else{const r=uni.request({url:c,data:e.data,header:e.header,method:e.method,timeout:e.timeout,dataType:e.dataType,responseType:e.responseType,sslVerify:e.sslVerify,withCredentials:e.withCredentials,firstIpv4:e.firstIpv4,success:p,fail:f,complete:m});null===(n=e.abortController)||void 0===n||n.promise.then((()=>{r.abort()})),e.offHeadersReceived&&r.offHeadersReceived(e.offHeadersReceived),e.onHeadersReceived&&r.onHeadersReceived(e.onHeadersReceived)}return a}(o.mergeConfig(e,this.config))}_request(e,r,t){return t||(t={}),"string"==typeof r?t.url=r:t=r,t.method=e,this.request(t)}get(e,r){return this._request("GET",e,r)}post(e,r){return this._request("POST",e,r)}put(e,r){return this._request("PUT",e,r)}delete(e,r){return this._request("DELETE",e,r)}options(e,r){return this._request("OPTIONS",e,r)}head(e,r){return this._request("HEAD",e,r)}reace(e,r){return this._request("TRACE",e,r)}connect(e,r){return this._request("CONNECT",e,r)}}},593:(e,r)=>{function t(e,r=""){const t=r.match(/^https?:\/\//);return t||r.startsWith("/")||(r="/"+r),e?t?r:e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):r}function o(e){let r="";for(let t in e){let o=e[t],n=Object.prototype.toString.call(o);"[object Array]"===n?o.forEach((e=>r+=`${t}=${e}&`)):r+="[object Object]"===n?`${t}=${JSON.stringify(o)}&`:`${t}=${o}&`}return r.replace(/&$/,"")}function n(e){const r={url:e,params:{}};if(!(e.indexOf("?")>=0))return r;const t=e.split("?");return r.url=t[0],t[1]?(t[1].split("&").map((e=>e.split("="))).forEach((e=>{if(2===e.length){const t=e[0],o=e[1];r.params.hasOwnProperty(t)?(r.params[t]=[r.params[t]],r.params[t].push(o)):r.params[t]=o}})),r):r}Object.defineProperty(r,"__esModule",{value:!0}),r.urlWithParams=r.parseUrlParams=r.jsonToSerialize=r.removeHeaderContentType=r.mergeUrl=r.mergeConfig=void 0,r.mergeConfig=function(e,r){var t,o,n,s,i,a,l,u,c,d,p,f,m,v,h,b,y,g,P,H,U,C,T,j,O,R;const _={baseURL:null!==(t=e.baseURL)&&void 0!==t?t:r.baseURL,url:null!==(o=e.url)&&void 0!==o?o:r.url,method:null!==(s=null!==(n=e.method)&&void 0!==n?n:r.method)&&void 0!==s?s:"GET",data:Object.assign({},r.data,e.data),params:Object.assign({},r.params,e.params),header:Object.assign({},r.header,e.header),filePath:null!==(i=e.filePath)&&void 0!==i?i:r.filePath,name:null!==(a=e.name)&&void 0!==a?a:r.name,timeout:null!==(l=e.timeout)&&void 0!==l?l:r.timeout,dataType:null!==(u=e.dataType)&&void 0!==u?u:r.dataType,responseType:null!==(c=e.responseType)&&void 0!==c?c:r.responseType,sslVerify:null!==(d=e.sslVerify)&&void 0!==d?d:r.sslVerify,withCredentials:null!==(p=e.withCredentials)&&void 0!==p?p:r.withCredentials,firstIpv4:null!==(f=e.firstIpv4)&&void 0!==f?f:r.firstIpv4,success:null!==(m=e.success)&&void 0!==m?m:r.success,fail:null!==(v=e.fail)&&void 0!==v?v:r.fail,complete:null!==(h=e.complete)&&void 0!==h?h:r.complete,fileType:null!==(b=e.fileType)&&void 0!==b?b:r.fileType,file:null!==(y=e.file)&&void 0!==y?y:r.file,files:null!==(g=e.files)&&void 0!==g?g:[],abortController:null!==(P=e.abortController)&&void 0!==P?P:r.abortController,offHeadersReceived:null!==(H=e.offHeadersReceived)&&void 0!==H?H:r.offHeadersReceived,onHeadersReceived:null!==(U=e.onHeadersReceived)&&void 0!==U?U:r.onHeadersReceived,onProgressUpdate:null!==(C=e.onProgressUpdate)&&void 0!==C?C:r.onProgressUpdate,offProgressUpdate:null!==(T=e.offProgressUpdate)&&void 0!==T?T:r.offProgressUpdate,interceptors:null!==(j=e.interceptors)&&void 0!==j?j:[]};return r.files&&(_.files=null===(O=_.files)||void 0===O?void 0:O.concat(r.files)),r.interceptors&&(_.interceptors=null===(R=_.interceptors)||void 0===R?void 0:R.concat(r.interceptors)),_},r.mergeUrl=t,r.removeHeaderContentType=function(e){return Object.keys(e).forEach((r=>{"content-type"===r.toLowerCase().trim()&&delete e[r]})),e},r.jsonToSerialize=o,r.parseUrlParams=n,r.urlWithParams=function(e){let r=n(t(e.baseURL,e.url));const s=o(Object.assign({},r.params,e.params));return s?r.url+"?"+s:r.url}}},r={};return function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{}};return e[o](n,n.exports,t),n.exports}(607)})()}));