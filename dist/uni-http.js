!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.uniHttp=r():e.uniHttp=r()}(this,(function(){return(()=>{"use strict";var e={503:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UniAbortController=void 0;r.UniAbortController=class{constructor(){this.promise=new Promise((e=>this._res=e))}abort(){this._res()}}},607:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UniHttpInterceptors=r.removeHeaderContentType=r.parseUrlParams=r.mergeUrl=r.mergeConfig=r.jsonToSerialize=r.UniHttp=r.UniAbortController=void 0;var o=t(503);Object.defineProperty(r,"UniAbortController",{enumerable:!0,get:function(){return o.UniAbortController}});var n=t(635);Object.defineProperty(r,"UniHttp",{enumerable:!0,get:function(){return n.UniHttp}});var s=t(593);Object.defineProperty(r,"jsonToSerialize",{enumerable:!0,get:function(){return s.jsonToSerialize}}),Object.defineProperty(r,"mergeConfig",{enumerable:!0,get:function(){return s.mergeConfig}}),Object.defineProperty(r,"mergeUrl",{enumerable:!0,get:function(){return s.mergeUrl}}),Object.defineProperty(r,"parseUrlParams",{enumerable:!0,get:function(){return s.parseUrlParams}}),Object.defineProperty(r,"removeHeaderContentType",{enumerable:!0,get:function(){return s.removeHeaderContentType}});var i=t(911);Object.defineProperty(r,"UniHttpInterceptors",{enumerable:!0,get:function(){return i.UniHttpInterceptors}})},911:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UniHttpInterceptors=void 0;r.UniHttpInterceptors=class{}},635:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UniHttp=void 0;const o=t(593);r.UniHttp=class{constructor(e={}){this.config=e}request(e){return function(e){var r,t,n,s;let i,l;const a=new Promise(((e,r)=>{i=e,l=r}));null===(r=e.interceptors)||void 0===r||r.forEach((r=>{e=r.request(e)}));const d=o.mergeUrl(e.baseURL,e.url);let c=o.parseUrlParams(d);const u=Object.assign({},c.params,e.params),p=c.url+"?"+o.jsonToSerialize(u);if(e.filePath||e.file||e.files&&e.files.length){e.header=o.removeHeaderContentType(null!==(t=e.header)&&void 0!==t?t:{});const r=uni.uploadFile({url:p,fileType:e.fileType,file:e.file,files:e.files,filePath:e.filePath,name:e.name,header:e.header,formData:e.data,success:r=>{var t;let o;try{o=JSON.parse(r.data)}catch(e){o=r.data}let n={statusCode:r.statusCode,header:{},cookies:[],data:o};null===(t=e.interceptors)||void 0===t||t.forEach((e=>{n=e.success(n)})),e.success?e.success(n):i(n)},fail:r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.fail(r)})),e.fail?e.fail(r):l(r)},complete:r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.complete(r)})),e.complete&&e.complete(r)}});null===(n=e.abortController)||void 0===n||n.promise.then((()=>{r.abort()})),e.offHeadersReceived&&r.offHeadersReceived(e.offHeadersReceived),e.onHeadersReceived&&r.onHeadersReceived(e.onHeadersReceived),e.onProgressUpdate&&r.onProgressUpdate(e.onProgressUpdate),e.offProgressUpdate&&r.offProgressUpdate(e.offProgressUpdate)}else{const r=uni.request({url:p,data:e.data,header:e.header,method:e.method,timeout:e.timeout,dataType:e.dataType,responseType:e.responseType,sslVerify:e.sslVerify,withCredentials:e.withCredentials,firstIpv4:e.firstIpv4,success:r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.success(r)})),e.success?e.success(r):i(r)},fail:r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.fail(r)})),e.fail?e.fail(r):l(r)},complete:r=>{var t;null===(t=e.interceptors)||void 0===t||t.forEach((e=>{r=e.complete(r)})),e.complete&&e.complete(r)}});null===(s=e.abortController)||void 0===s||s.promise.then((()=>{r.abort()})),e.offHeadersReceived&&r.offHeadersReceived(e.offHeadersReceived),e.onHeadersReceived&&r.onHeadersReceived(e.onHeadersReceived)}return a}(o.mergeConfig(e,this.config))}get(e,r={}){return r.method="GET",r.url=e,this.request(r)}post(e,r={}){return r.method="POST",r.url=e,this.request(r)}put(e,r={}){return r.method="PUT",r.url=e,this.request(r)}delete(e,r={}){return r.method="DELETE",r.url=e,this.request(r)}options(e,r={}){return r.method="OPTIONS",r.url=e,this.request(r)}head(e,r={}){return r.method="HEAD",r.url=e,this.request(r)}reace(e,r={}){return r.method="TRACE",r.url=e,this.request(r)}connect(e,r={}){return r.method="CONNECT",r.url=e,this.request(r)}}},593:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.parseUrlParams=r.jsonToSerialize=r.removeHeaderContentType=r.mergeUrl=r.mergeConfig=void 0,r.mergeConfig=function(e,r){var t,o,n,s,i,l,a,d,c,u,p,f,v,m,h,b,y,g,U,P,H,T,C,j,O,R;const E={baseURL:null!==(t=e.baseURL)&&void 0!==t?t:r.baseURL,url:null!==(o=e.url)&&void 0!==o?o:r.url,method:null!==(s=null!==(n=e.method)&&void 0!==n?n:r.method)&&void 0!==s?s:"GET",data:Object.assign({},r.data,e.data),params:Object.assign({},r.params,e.params),header:Object.assign({},r.header,e.header),filePath:null!==(i=e.filePath)&&void 0!==i?i:r.filePath,name:null!==(l=e.name)&&void 0!==l?l:r.name,timeout:null!==(a=e.timeout)&&void 0!==a?a:r.timeout,dataType:null!==(d=e.dataType)&&void 0!==d?d:r.dataType,responseType:null!==(c=e.responseType)&&void 0!==c?c:r.responseType,sslVerify:null!==(u=e.sslVerify)&&void 0!==u?u:r.sslVerify,withCredentials:null!==(p=e.withCredentials)&&void 0!==p?p:r.withCredentials,firstIpv4:null!==(f=e.firstIpv4)&&void 0!==f?f:r.firstIpv4,success:null!==(v=e.success)&&void 0!==v?v:r.success,fail:null!==(m=e.fail)&&void 0!==m?m:r.fail,complete:null!==(h=e.complete)&&void 0!==h?h:r.complete,fileType:null!==(b=e.fileType)&&void 0!==b?b:r.fileType,file:null!==(y=e.file)&&void 0!==y?y:r.file,files:null!==(g=e.files)&&void 0!==g?g:[],abortController:null!==(U=e.abortController)&&void 0!==U?U:r.abortController,offHeadersReceived:null!==(P=e.offHeadersReceived)&&void 0!==P?P:r.offHeadersReceived,onHeadersReceived:null!==(H=e.onHeadersReceived)&&void 0!==H?H:r.onHeadersReceived,onProgressUpdate:null!==(T=e.onProgressUpdate)&&void 0!==T?T:r.onProgressUpdate,offProgressUpdate:null!==(C=e.offProgressUpdate)&&void 0!==C?C:r.offProgressUpdate,interceptors:null!==(j=e.interceptors)&&void 0!==j?j:[]};return r.files&&(E.files=null===(O=E.files)||void 0===O?void 0:O.concat(r.files)),r.interceptors&&(E.interceptors=null===(R=E.interceptors)||void 0===R?void 0:R.concat(r.interceptors)),E},r.mergeUrl=function(e,r=""){return e?r.match(/^https?:\/\//)?r:e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):r},r.removeHeaderContentType=function(e){return Object.keys(e).forEach((r=>{"content-type"===r.toLowerCase().trim()&&delete e[r]})),e},r.jsonToSerialize=function(e){let r="";for(let t in e){let o=e[t],n=Object.prototype.toString.call(o);"[object Array]"===n?o.forEach((e=>r+=`${t}=${e}&`)):r+="[object Object]"===n?`${t}=${JSON.stringify(o)}&`:`${t}=${o}&`}return r.replace(/&$/,"")},r.parseUrlParams=function(e){const r={url:e,params:{}};if(!(e.indexOf("?")>=0))return r;const t=e.split("?");return r.url=t[0],t[1]?(t[1].split("&").map((e=>e.split("="))).forEach((e=>{if(2===e.length){const t=e[0],o=e[1];r.params.hasOwnProperty(t)?(r.params[t]=[r.params[t]],r.params[t].push(o)):r.params[t]=o}})),r):r}}},r={};return function t(o){if(r[o])return r[o].exports;var n=r[o]={exports:{}};return e[o](n,n.exports,t),n.exports}(607)})()}));